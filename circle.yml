general:
  build_dir: .
  artifacts:
    - "css" # Compiled adk.css file

dependencies:
  pre:
    - npm install -g gulp
  override:
    - npm install
    - gulp sass
    - gulp sherpa

test:
  override:
    - echo 'No Tests'

deployment:
  design-kit.arc.ht:
    branch: master
    commands:
      - mv css $CIRCLE_ARTIFACTS
      - aws s3 sync $CIRCLE_ARTIFACTS/css s3://design-kit.arc.ht/css/ --delete
      - aws s3 sync js s3://design-kit.arc.ht/js/ --delete
      - aws s3 sync fonts s3://design-kit.arc.ht/fonts/ --delete
      - aws s3 sync assets s3://design-kit.arc.ht/assets/ --delete
      - aws s3 sync docs s3://design-kit.arc.ht/docs/ --exclude "*" --include "*.css" --include "*.js" --delete
      - aws s3 sync . s3://design-kit.arc.ht/ --exclude "*" --include "*.html"

experimental:
  notify:
    branches:
      only:
        - master